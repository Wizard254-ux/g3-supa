# ISP Middleware Flask Application - Environment Configuration

# =============================================================================
# Flask Configuration
# =============================================================================
FLASK_ENV=development
FLASK_HOST=0.0.0.0
FLASK_PORT=5001
FLASK_DEBUG=True
SECRET_KEY=your-super-secret-key-change-this-in-production-make-it-very-long-and-random
JWT_SECRET_KEY=your-jwt-secret-key-also-change-this-in-production

# =============================================================================
# Database Configuration
# =============================================================================
# PostgreSQL (recommended for production)
#DATABASE_URL=postgresql://isp_user:isp_password@localhost:5432/isp_middleware

# SQLite (for development/testing)
 DATABASE_URL=sqlite:///isp_middleware.db

# =============================================================================
# Redis Configuration
# =============================================================================
REDIS_URL=redis://localhost:6379/0

# =============================================================================
# RADIUS Configuration
# =============================================================================
RADIUS_SERVER_IP=127.0.0.1
RADIUS_SERVER_PORT=1812
RADIUS_ACCOUNTING_PORT=1813
RADIUS_SECRET=testing123
RADIUS_TIMEOUT=5
RADIUS_RETRIES=3

# =============================================================================
# MikroTik Configuration
# =============================================================================
# Core Router (primary MikroTik device)
MIKROTIK_CORE_HOST=192.168.1.1
MIKROTIK_CORE_USER=admin
MIKROTIK_CORE_PASS=your_mikrotik_password
MIKROTIK_CORE_PORT=8728
MIKROTIK_CORE_SSL=False

# Distribution Router (optional second device)
MIKROTIK_DIST_HOST=192.168.1.2
MIKROTIK_DIST_USER=admin
MIKROTIK_DIST_PASS=your_mikrotik_password
MIKROTIK_DIST_PORT=8728
MIKROTIK_DIST_SSL=False

# Access Point Controller (optional third device)
MIKROTIK_AP_HOST=192.168.1.3
MIKROTIK_AP_USER=admin
MIKROTIK_AP_PASS=your_mikrotik_password
MIKROTIK_AP_PORT=8728
MIKROTIK_AP_SSL=False

# =============================================================================
# OpenVPN Configuration
# =============================================================================
OPENVPN_CONFIG_DIR=/etc/openvpn
OPENVPN_CLIENT_CONFIG_DIR=/etc/openvpn/clients
OPENVPN_CA_CERT=/etc/openvpn/server/ca.crt
OPENVPN_SERVER_CERT=/etc/openvpn/server/server.crt
OPENVPN_SERVER_KEY=/etc/openvpn/server/server.key
OPENVPN_DH_PARAMS=/etc/openvpn/server/dh.pem
OPENVPN_SERVER_IP=10.8.0.0
OPENVPN_SERVER_MASK=255.255.255.0

# =============================================================================
# Django API Configuration (Customer Management System)
# =============================================================================
DJANGO_API_URL=http://localhost:8000/api
DJANGO_API_KEY=your-django-api-key-for-authentication
DJANGO_API_TIMEOUT=30

# =============================================================================
# Network Configuration
# =============================================================================
NETWORK_INTERFACE=eth0
DEFAULT_GATEWAY=192.168.1.1
DNS_SERVERS=8.8.8.8,8.8.4.4

# =============================================================================
# Bandwidth Management
# =============================================================================
DEFAULT_DOWNLOAD_SPEED=1
DEFAULT_UPLOAD_SPEED=1
MAX_DOWNLOAD_SPEED=100
MAX_UPLOAD_SPEED=100

# =============================================================================
# Session Management
# =============================================================================
DEFAULT_SESSION_TIMEOUT=3600
DEFAULT_IDLE_TIMEOUT=600
MAX_CONCURRENT_SESSIONS=1

# =============================================================================
# Security Configuration
# =============================================================================
API_KEY_HEADER=X-API-Key
# Comma-separated list of allowed IP addresses/CIDR blocks
ALLOWED_IPS=127.0.0.1,192.168.1.0/24,10.0.0.0/8
BLOCK_SUSPICIOUS_IPS=True
MAX_LOGIN_ATTEMPTS=5
LOGIN_ATTEMPT_WINDOW=900

# =============================================================================
# Logging Configuration
# =============================================================================
LOG_LEVEL=INFO
LOG_FILE=/var/log/isp_middleware/app.log

# =============================================================================
# Monitoring Configuration
# =============================================================================
MONITORING_INTERVAL=60
HEALTH_CHECK_INTERVAL=30
PROMETHEUS_METRICS=True
METRICS_PORT=9090

# =============================================================================
# CORS Configuration
# =============================================================================
# Comma-separated list of allowed origins
CORS_ORIGINS=http://localhost:3000,http://localhost:8000,https://yourdomain.com

# =============================================================================
# Email Configuration (for notifications)
# =============================================================================
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_USE_TLS=True

# =============================================================================
# SMS Configuration (for notifications)
# =============================================================================
# Africa's Talking (popular in Kenya)
SMS_PROVIDER=africastalking
SMS_API_KEY=your-africastalking-api-key
SMS_USERNAME=your-africastalking-username
SMS_SENDER_ID=ISP

# Twilio (alternative SMS provider)
# SMS_PROVIDER=twilio
# SMS_API_KEY=your-twilio-auth-token
# SMS_USERNAME=your-twilio-account-sid
# SMS_SENDER_ID=+1234567890

# =============================================================================
# File Upload Configuration
# =============================================================================
UPLOAD_FOLDER=/var/uploads/isp_middleware
MAX_CONTENT_LENGTH=16777216

# =============================================================================
# Celery Configuration (for background tasks)
# =============================================================================
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/1

# =============================================================================
# Development/Testing Settings
# =============================================================================
# Set to True to enable debug mode (NEVER in production)
DEBUG=False

# Set to True to enable SQL query logging
SQLALCHEMY_ECHO=False

# Test database (for running tests)
TEST_DATABASE_URL=sqlite:///test_isp_middleware.db

# =============================================================================
# Production-specific Settings
# =============================================================================
# SSL/TLS Settings
SSL_CERT_PATH=/etc/ssl/certs/isp-middleware.crt
SSL_KEY_PATH=/etc/ssl/private/isp-middleware.key

# Session Security
SESSION_COOKIE_SECURE=True
SESSION_COOKIE_HTTPONLY=True
SESSION_COOKIE_SAMESITE=Lax

# Reverse Proxy Settings (if using Nginx)
PROXY_COUNT=1
PROXY_HEADERS=True

# =============================================================================
# Optional Integrations
# =============================================================================
# Sentry (Error Tracking)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# Slack (Notifications)
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK

# Payment Gateway (for billing integration)
PAYMENT_GATEWAY=stripe
STRIPE_PUBLIC_KEY=pk_test_your_stripe_public_key
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key

# =============================================================================
# Custom ISP Settings
# =============================================================================
# Your ISP company information
ISP_COMPANY_NAME=Your ISP Company Name
ISP_COMPANY_EMAIL=support@yourisp.com
ISP_COMPANY_PHONE=+254700000000
ISP_SUPPORT_EMAIL=support@yourisp.com

# Billing Settings
BILLING_CURRENCY=KES
BILLING_TIMEZONE=Africa/Nairobi
BILLING_CYCLE=monthly

# Network Settings
NETWORK_NAME=Your ISP Network
NETWORK_COUNTRY=KE
NETWORK_TIMEZONE=Africa/Nairobi

# =============================================================================
# Performance Tuning
# =============================================================================
# Database connection pool settings
DB_POOL_SIZE=10
DB_POOL_RECYCLE=3600
DB_POOL_PRE_PING=True

# Redis connection pool settings
REDIS_POOL_SIZE=10
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5

# API Rate Limiting
API_RATE_LIMIT_PER_MINUTE=60
API_RATE_LIMIT_PER_HOUR=1000

# Cache Settings
CACHE_DEFAULT_TIMEOUT=300
CACHE_REDIS_DB=2

# =============================================================================
# Backup Settings
# =============================================================================
BACKUP_DIRECTORY=/var/backups/isp_middleware
BACKUP_RETENTION_DAYS=30
AUTO_BACKUP_ENABLED=True
AUTO_BACKUP_INTERVAL=daily

# =============================================================================
# External Service URLs
# =============================================================================
# Network monitoring tools
MONITORING_API_URL=http://localhost:9090
GRAFANA_URL=http://localhost:3000

# External DNS servers for testing
TEST_DNS_SERVERS=8.8.8.8,1.1.1.1

# Speed test servers
SPEEDTEST_SERVERS=speedtest.net,fast.com

# =============================================================================
# Feature Flags
# =============================================================================
ENABLE_BANDWIDTH_MONITORING=True
ENABLE_REAL_TIME_STATS=True
ENABLE_AUTO_BILLING=True
ENABLE_SMS_NOTIFICATIONS=True
ENABLE_EMAIL_NOTIFICATIONS=True
ENABLE_ALERT_SYSTEM=True
ENABLE_USAGE_ANALYTICS=True

# =============================================================================
# Maintenance Mode
# =============================================================================
MAINTENANCE_MODE=False
MAINTENANCE_MESSAGE=System is under maintenance. Please try again later.

# =============================================================================
# Notes for Setup
# =============================================================================
# 1. Copy this file to .env in your project root
# 2. Update all the placeholder values with your actual configuration
# 3. Ensure the database and Redis are running and accessible
# 4. Configure your MikroTik devices with the correct credentials
# 5. Set up SSL certificates for production
# 6. Configure firewall rules for security
# 7. Set up log rotation for application logs
# 8. Configure monitoring and alerting
# 9. Test all integrations before going live
# 10. Remember to backup your configuration regularly